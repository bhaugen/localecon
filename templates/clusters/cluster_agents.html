{% extends "base.html" %}
{% load permissions %}
{% load humanize %}

{% block title %}
     Agents in Cluster {{ cluster }}
{% endblock %}

{% block extra_head %}

<style>

body {font-size:90%}
h1 {font-size:2.25em}
h2 {font-size:1.6875em}
p {font-size:0.7875em}
	
</style>

{% endblock %}

{% block content %}

<div class="agents">

{% include "clusters/_cluster_nav.html" %}

<h3>Agents performing Functions in Cluster {{ cluster }}</h3>

{% cluster_perms user edit cluster as can_edit %}
{% if can_edit %}
<div class="section-div" style="float: left; width: 40%; " >
	<form action="{% url edit_cluster_agents cluster_id=cluster.id %}" method="GET">
    	<input type="submit" value="Edit Potential Agent Consumption &amp; Production" />
	</form>
	<p class="desc">When you don't know which agents trade directly with each other.<br /> See <a href="/clusterdetails/" target="_blank" >Help for Types of Cluster Models</a>.</p>
</div>
<div class="section-div" style="float: left; margin-left: 2em; width: 40%; " >
	<form action="{% url edit_agent_flows cluster_id=cluster.id %}" method="GET">
    	<input type="submit" value="Edit Actual Agent Resource Flows" />
	</form>
	<p class="desc">When you <b>do</b> know which agents trade directly with each other.<br /> See <a href="/clusterdetails/" target="_blank" >Help for Types of Cluster Models</a>.</p>
</div>
<div style="clear: both; "></div>
{% endif %}

{% cluster_perms user edit cluster as can_edit %}
{% if can_edit %}
<div style="margin-top:10px; margin-bottom:10px;">
	<a style="font-size:110%; font-weight:bold;" href="{% url new_cluster_agent cluster_id=cluster.id %}">Add New Cluster Agent</a>
</div>
{% endif %}

{% for agent in agents %}
    <table>
		<tr>
			<td style="text-align: left; font-size: 110%; padding-top: 1em; " colspan="3" ><span class="emphasis">{{ agent.name }}</span>
                {% cluster_perms user edit cluster as can_edit %}
                {% if can_edit %}
                    {% if agent.address_is_editable %}
                        &nbsp;&nbsp;&nbsp;
                        <a href="{% url edit_agent_address cluster_id=cluster.id agent_id=agent.id %}">Edit Agent Addresss</a>
                    {% else %}
                        <a href="{% url edit_community_agent cluster_id=cluster.id agent_id=agent.id %}">Edit Community Agent Info</a>
                    {% endif %}
                {% endif %}&nbsp;&nbsp;&nbsp;
                Info from: 
                {{ agent.form.text_info_provided_by }}&nbsp;&nbsp;&nbsp;
                Contact: 
                {{ agent.form.text_contact }}&nbsp;&nbsp;&nbsp;
                Closeness: 
                {{ agent.form.text_degree_of_separation  }}
            </td>
        </tr>
        <tr>
            <td>Description<br />{{ agent.form.description }}</td>
            <td>Consumes<br />{{ agent.form.text_consumes }}</td>
            <td>Produces<br />{{ agent.form.text_produces }}</td>
        </tr>
    </table>
{% endfor %}



</div>
{% endblock %}
